<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="assets/Python.svg.png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.1/styles/default.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <script src="dist/mutiFileReference.js"></script>
    <link rel="stylesheet" href="css/darkbg.css">
    <title>Django Model Manager</title>
</head>
<body>    
         <nav class="navbar navbar-expand-lg d-flex firstNavBar border-bottom border-tertiary">
            <div class="container-fluid">
            <a class="navbar-brand fs-4 fw-bold firstnavHeading" href="#"><img src="assets/cppdsaImg (1).png" alt="" style="width: 30px; height: 30px; border-radius: 50%;"></a>
            <div class="d-flex gap-3 firstNavIcons">
                <i class='bx bx-moon fs-4' id="darkLightIcon"></i>
                    <!-- Button trigger modal -->
                <!-- <i  class='bx bx-user fs-4' data-bs-toggle="modal" data-bs-target="#loginFormModal"></i>   -->
                <!-- Modal -->
                <div class="modal fade " id="loginFormModal" tabindex="-1" aria-labelledby="loginFormModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                    <div class="modal-content loginSignUpFormModal" style=" color: rgb(9, 171, 236);">
                        <div class="modal-header">
                        <h1 class="modal-title fs-5" id="loginFormModalLabel">SignUp</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <form id="signupForm">
                                <div class="mb-3">
                                  <label for="name" class="form-label">Name</label>
                                  <input type="text" class="form-control" id="name" required>
                                </div>
                                <div class="mb-3">
                                  <label for="exampleInputEmail1" class="form-label">Email address</label>
                                  <input type="email" class="form-control" id="email" aria-describedby="emailHelp" required>
                                </div>
                                <div class="mb-3">
                                  <label for="password" class="form-label">Password</label>
                                  <input type="password" class="form-control" id="password" required>
                                </div>
                                <div class="mb-3">
                                  <label for="confirmPassword" class="form-label">Confirm Password</label>
                                  <input type="password" class="form-control" id="confirmPassword" required>
                                </div>
                                <div class="d-flex justify-content-center">
                                  <button type="submit" class="btn btn-primary">Sign Up</button>
                                </div>
                                <div id="loginPrompt" class="text-center mt-3"></div>
                              </form>
                              <div id="loginForm" class="text-center">
                                <p>Already registered? <a href="#" id="showLogin">Login</a></p>
                              </div>                              
                        </div>
                    </div>
                    </div>
                </div>
            </div>
            <div class="" id="navbarSupportedContent d-flex flex-row gap-3">
                <div>
                    <form class="d-flex" role="search" id="searchForm" onsubmit="handleSearch(event)">
                        <input type="text" id="searchInput" class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                        <button class="btn searchBtn" type="submit">Search</button>
                    </form>
                </div>
            </div>
            </div>
        </nav>
        <div id="navbar" style="position: sticky; top:0; z-index: 1000;"></div>
        <script>loadContent('navbar.html', 'navbar');</script>
        <div id="pythonSideBar"></div>
        <script>loadContent('pythonSideBar.html', 'pythonSideBar');</script>
       <div class="container-fluid SingleLinkedListPage">
            <div class="row">
                <div class="col-md-3 p-5">
                </div>
                <div class="col-md-9 animationCol pb-5" style=" position: relative;">
                    <h1 class="text-primary">Django Model Manager</h1>
                    <h3 class="text-info">Soft Delete</h3>
                    <p>Soft delete is a technique used to mark records as deleted instead of actually removing them from the database. This is useful when you need to retain historical data or restore deleted records later.</p>
                    <h3 class="text-info">Why to Use</h3>
                    <ul>
                        <li><strong>Data Recovery: </strong>Since records are not permanently deleted, they can be restored if needed.</li>
                        <li><strong>Historical Records: </strong>Keeps a history of all records, useful for auditing.</li>
                        <li><strong>Integrity and Referencing: </strong>Prevents issues that might arise due to foreign key constraints.</li>
                        <li><strong>Performance: </strong>Avoids costly delete operations on large datasets and maintains database consistency.</li>
                    </ul>
                    <h3 class="text-info">How to Implement</h3>
                    <p>Django provides model managers that help customize database queries. We'll create a SkillManager class to exclude deleted records automatically.</p>
                    <p>home/models.py</p>
                    <div class="code-container my-2">
                        <div>
                           <div style="position: realtive; transition: 2s ease;" class="d-none copiedMessage">
                               <p  style="position: absolute; left: 40%; padding: 10px;clip-path: polygon(0% 15%, 0 0, 15% 0%, 85% 0%, 100% 0, 100% 15%, 100% 85%, 85% 85%, 63% 86%, 53% 100%, 42% 86%, 0% 85%); background-color: rgba(111, 44, 244, 0.603); color: white; border-radius: 5px;" >Copied!</p>
                           </div>
                           <div style="position: realtive; transition: 2s ease;" class="d-none notCopiedMessage">
                               <p  style="position: absolute; left: 40%; padding: 10px;clip-path: polygon(0% 15%, 0 0, 15% 0%, 85% 0%, 100% 0, 100% 15%, 100% 85%, 85% 85%, 63% 86%, 53% 100%, 42% 86%, 0% 85%); background-color: rgba(205, 22, 22, 0.427); color: white; border-radius: 5px;" >Not Copied!</p>
                           </div>
                            <i class='bx bx-copy text-dark bg-light p-2 rounded' id="copyIcon140"></i>
                            <i class='bx bx-moon text-dark bg-light p-2 rounded lightDarkIconForCode' id="lightDarkIcon140"></i>
                        </div>
                       <pre class="mt-2"><code class="language-python" id="SimpleNodeCode140">
from django.db import models

class SkillManager(models.Manager):
    """Custom Manager to filter out soft-deleted records"""
    def get_queryset(self) -> models.QuerySet:
        return super().get_queryset().filter(is_deleted=False)

class Skill(models.Model):
    name = models.CharField(max_length=255)
    is_deleted = models.BooleanField(default=False)  # Soft delete flag

    objects = SkillManager()  # Custom manager
    new_manager = models.Manager()  # Default manager (to access all records)

    def soft_delete(self):
        """Soft deletes the record by setting is_deleted to True"""
        self.is_deleted = True
        self.save()
    
    def restore(self):
        """Restores the record by setting is_deleted to False"""
        self.is_deleted = False
        self.save()
                        </code></pre>
                    </div>
                    <h3 class="text-info">Python Shell</h3>
                    <p>Give these commands one by one in python shell</p>
                    <div class="code-container my-2">
                        <div>
                           <div style="position: realtive; transition: 2s ease;" class="d-none copiedMessage">
                               <p  style="position: absolute; left: 40%; padding: 10px;clip-path: polygon(0% 15%, 0 0, 15% 0%, 85% 0%, 100% 0, 100% 15%, 100% 85%, 85% 85%, 63% 86%, 53% 100%, 42% 86%, 0% 85%); background-color: rgba(111, 44, 244, 0.603); color: white; border-radius: 5px;" >Copied!</p>
                           </div>
                           <div style="position: realtive; transition: 2s ease;" class="d-none notCopiedMessage">
                               <p  style="position: absolute; left: 40%; padding: 10px;clip-path: polygon(0% 15%, 0 0, 15% 0%, 85% 0%, 100% 0, 100% 15%, 100% 85%, 85% 85%, 63% 86%, 53% 100%, 42% 86%, 0% 85%); background-color: rgba(205, 22, 22, 0.427); color: white; border-radius: 5px;" >Not Copied!</p>
                           </div>
                            <i class='bx bx-copy text-dark bg-light p-2 rounded' id="copyIcon141"></i>
                            <i class='bx bx-moon text-dark bg-light p-2 rounded lightDarkIconForCode' id="lightDarkIcon141"></i>
                        </div>
                       <pre class="mt-2"><code class="language-python" id="SimpleNodeCode141">
from home.models import Skills

# Get all non-deleted skills (default behavior with custom manager)
Skills.objects.all()

# Get only active (not deleted) records
Skills.objects.filter(is_deleted=False)

# Get all records including soft-deleted ones using the default manager
Skills.new_manager.all()

# Soft delete a record
skill = Skills.objects.first()
skill.soft_delete()

# Restore a record
skill.restore()
                        </code></pre>
                    </div>
                    <h3 class="text-danger">Note</h3>
                    <p>Maybe you have this type of code in other python files</p>
                    <div class="code-container my-2">
                        <div>
                           <div style="position: realtive; transition: 2s ease;" class="d-none copiedMessage">
                               <p  style="position: absolute; left: 40%; padding: 10px;clip-path: polygon(0% 15%, 0 0, 15% 0%, 85% 0%, 100% 0, 100% 15%, 100% 85%, 85% 85%, 63% 86%, 53% 100%, 42% 86%, 0% 85%); background-color: rgba(111, 44, 244, 0.603); color: white; border-radius: 5px;" >Copied!</p>
                           </div>
                           <div style="position: realtive; transition: 2s ease;" class="d-none notCopiedMessage">
                               <p  style="position: absolute; left: 40%; padding: 10px;clip-path: polygon(0% 15%, 0 0, 15% 0%, 85% 0%, 100% 0, 100% 15%, 100% 85%, 85% 85%, 63% 86%, 53% 100%, 42% 86%, 0% 85%); background-color: rgba(205, 22, 22, 0.427); color: white; border-radius: 5px;" >Not Copied!</p>
                           </div>
                            <i class='bx bx-copy text-dark bg-light p-2 rounded' id="copyIcon142"></i>
                            <i class='bx bx-moon text-dark bg-light p-2 rounded lightDarkIconForCode' id="lightDarkIcon142"></i>
                        </div>
                       <pre class="mt-2"><code class="language-python" id="SimpleNodeCode142">
skills = Skill.objects.all()
                        </code></pre>
                    </div>
                    <p>Remain the uper code as it is,so no need to replace the code as given below</p>
                    <div class="code-container my-2">
                        <div>
                           <div style="position: realtive; transition: 2s ease;" class="d-none copiedMessage">
                               <p  style="position: absolute; left: 40%; padding: 10px;clip-path: polygon(0% 15%, 0 0, 15% 0%, 85% 0%, 100% 0, 100% 15%, 100% 85%, 85% 85%, 63% 86%, 53% 100%, 42% 86%, 0% 85%); background-color: rgba(111, 44, 244, 0.603); color: white; border-radius: 5px;" >Copied!</p>
                           </div>
                           <div style="position: realtive; transition: 2s ease;" class="d-none notCopiedMessage">
                               <p  style="position: absolute; left: 40%; padding: 10px;clip-path: polygon(0% 15%, 0 0, 15% 0%, 85% 0%, 100% 0, 100% 15%, 100% 85%, 85% 85%, 63% 86%, 53% 100%, 42% 86%, 0% 85%); background-color: rgba(205, 22, 22, 0.427); color: white; border-radius: 5px;" >Not Copied!</p>
                           </div>
                            <i class='bx bx-copy text-dark bg-light p-2 rounded' id="copyIcon143"></i>
                            <i class='bx bx-moon text-dark bg-light p-2 rounded lightDarkIconForCode' id="lightDarkIcon143"></i>
                        </div>
                       <pre class="mt-2"><code class="language-python" id="SimpleNodeCode143">
skills = Skill.objects.filter(is_deleted=False)
                        </code></pre>
                    </div>
                    <p class="mt-2">Since we have overridden the default manager (objects) in the Skill model, calling Skill.objects.all() will automatically exclude soft-deleted records.</p>
                    <h3 class="text-info">Conclusion</h3>
                    <p>Using a soft delete approach with a custom model manager in Django ensures that records are logically deleted while still being available for recovery. It provides better data management, reduces accidental deletions, and keeps query logic clean and efficient.</p>
                </div>
            </div>
       </div>
       <script>loadContent('Up.html', 'quickUp');</script>
        <div id="quickUp"></div>
       <script>loadContent('footer.html', 'footer');</script>
       <div id="footer"></div>
       <script src="js/searchFunctionlity.js"></script>
       <script src="dist/up.js"></script>
       <script src="dist/codeFunctionality.js"></script>
       <script src="dist/index.js"></script>
       <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.1/highlight.min.js"></script>
       <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.1/languages/python.min.js"></script>
       <script>hljs.highlightAll();</script>
</body>
</html> 